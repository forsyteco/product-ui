import{r as u,R as S,j as oe}from"./iframe-CeYd32X8.js";import{B as Ae}from"./button-CxpgOoq8.js";import{c as he}from"./tailwind-CDN07tui.js";import{$ as Ge,a as qe}from"./useFocusRing-DXUggmaQ.js";import{w as Le,e as Ve}from"./use-resolve-button-type-FwMgqBLi.js";import{A as He,y as Ke,R as We,T as Ye,w as Qe,F as Ze}from"./floating-Bn-YBmfF.js";import{u as Q,Y as J,y as Z,T as ze,s as Be,o as I,K as ae,n as Ue,V as ve,A as ie}from"./use-sync-refs-ry5utqyI.js";import{E as Je}from"./use-event-listener-YoiA5kE_.js";import{T as Xe,x as et,c as tt,S as z,d as nt,e as ot,a as rt,u as we,p as at,f as st,t as lt}from"./portal-0gor4Twm.js";import{x as ut,S as it,j as Oe,u as ke,a as M}from"./use-tab-direction-CpZ9KP3-.js";import{a as be,b as ct,n as se,f as re,o as q,i as pt,r as Se}from"./keyboard-BoF71p42.js";import{c as dt,u as Fe,N as Te,x as _e,s as ft,i as U}from"./open-closed-DQGie1tM.js";import{C as De}from"./close-provider-DQYUtmEZ.js";import{f as me,s as Pe}from"./hidden-DipbFeWg.js";import{s as Ne}from"./bugs-Red6znm7.js";import{x as ye,v as L,T as j,H as vt,I as bt,A as $e}from"./focus-management-DoY0kjxM.js";var mt=Object.defineProperty,Pt=(e,n,t)=>n in e?mt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Ee=(e,n,t)=>(Pt(e,typeof n!="symbol"?n+"":n,t),t),P=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(P||{}),$t=(e=>(e[e.OpenPopover=0]="OpenPopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))($t||{});let ht={0:e=>e.popoverState===0?e:{...e,popoverState:0,__demoMode:!1},1(e){return e.popoverState===1?e:{...e,popoverState:1,__demoMode:!1}},2(e,n){return e.button===n.button?e:{...e,button:n.button}},3(e,n){return e.buttonId===n.buttonId?e:{...e,buttonId:n.buttonId}},4(e,n){return e.panel===n.panel?e:{...e,panel:n.panel}},5(e,n){return e.panelId===n.panelId?e:{...e,panelId:n.panelId}}};class ge extends Xe{constructor(n){super(n),Ee(this,"actions",{close:()=>this.send({type:1}),refocusableClose:t=>{this.actions.close();let p=t?be(t)?t:"current"in t&&be(t.current)?t.current:this.state.button:this.state.button;p?.focus()},open:()=>this.send({type:0}),setButtonId:t=>this.send({type:3,buttonId:t}),setButton:t=>this.send({type:2,button:t}),setPanelId:t=>this.send({type:5,panelId:t}),setPanel:t=>this.send({type:4,panel:t})}),Ee(this,"selectors",{isPortalled:t=>{var p;if(!t.button||!t.panel)return!1;let v=(p=ct(t.button))!=null?p:document;for(let y of v.querySelectorAll("body > *"))if(Number(y?.contains(t.button))^Number(y?.contains(t.panel)))return!0;let m=ye(v),s=m.indexOf(t.button),o=(s+m.length-1)%m.length,x=(s+1)%m.length,C=m[o],a=m[x];return!t.panel.contains(C)&&!t.panel.contains(a)}});{let t=this.state.id,p=et.get(null);this.on(0,()=>p.actions.push(t)),this.on(1,()=>p.actions.pop(t))}}static new({id:n,__demoMode:t=!1}){return new ge({id:n,__demoMode:t,popoverState:t?0:1,buttons:{current:[]},button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:{current:null},afterPanelSentinel:{current:null},afterButtonSentinel:{current:null}})}reduce(n,t){return Q(t.type,ht,n,t)}}const Re=u.createContext(null);function ce(e){let n=u.useContext(Re);if(n===null){let t=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ce),t}return n}function St({id:e,__demoMode:n=!1}){let t=u.useMemo(()=>ge.new({id:e,__demoMode:n}),[]);return tt(()=>t.dispose()),t}let Ie=u.createContext(null);Ie.displayName="PopoverGroupContext";function Me(){return u.useContext(Ie)}let pe=u.createContext(null);pe.displayName="PopoverPanelContext";function yt(){return u.useContext(pe)}let gt="div";function It(e,n){var t;let p=u.useId(),{__demoMode:v=!1,...m}=e,s=St({id:p,__demoMode:v}),o=u.useRef(null),x=Z(n,ze(l=>{o.current=l})),[C,a,y,g,O]=z(s,u.useCallback(l=>[l.popoverState,l.button,l.panel,l.buttonId,l.panelId],[])),k=nt((t=o.current)!=null?t:a),f=Be(g),b=Be(O),$=u.useMemo(()=>({buttonId:f,panelId:b,close:s.actions.close}),[f,b,s]),h=Me(),i=h?.registerPopover,B=I(()=>{var l,w;let F=re((l=o.current)!=null?l:a);return(w=h?.isFocusWithinPopoverGroup())!=null?w:F&&(a?.contains(F)||y?.contains(F))});u.useEffect(()=>i?.($),[i,$]);let[X,ee]=ot(),A=ut(a),N=it({mainTreeNode:A,portals:X,defaultContainers:[{get current(){return s.state.button}},{get current(){return s.state.panel}}]});Je(k,"focus",l=>{var w,F,_,W,D,Y;l.target!==window&&pt(l.target)&&s.state.popoverState===P.Open&&(B()||s.state.button&&s.state.panel&&(N.contains(l.target)||(F=(w=s.state.beforePanelSentinel.current)==null?void 0:w.contains)!=null&&F.call(w,l.target)||(W=(_=s.state.afterPanelSentinel.current)==null?void 0:_.contains)!=null&&W.call(_,l.target)||(Y=(D=s.state.afterButtonSentinel.current)==null?void 0:D.contains)!=null&&Y.call(D,l.target)||s.actions.close()))},!0);let V=C===P.Open;rt(V,N.resolveContainers,(l,w)=>{s.actions.close(),vt(w,bt.Loose)||(l.preventDefault(),a?.focus())});let te=se({open:C===P.Open,close:s.actions.refocusableClose}),ne=z(s,u.useCallback(l=>Q(l.popoverState,{[P.Open]:U.Open,[P.Closed]:U.Closed}),[])),H={ref:x},K=ae();return S.createElement(Oe,{node:A},S.createElement(He,null,S.createElement(pe.Provider,{value:null},S.createElement(Re.Provider,{value:s},S.createElement(De,{value:s.actions.refocusableClose},S.createElement(dt,{value:ne},S.createElement(ee,null,K({ourProps:H,theirProps:m,slot:te,defaultTag:gt,name:"Popover"}))))))))}let Ct="button";function xt(e,n){let t=u.useId(),{id:p=`headlessui-popover-button-${t}`,disabled:v=!1,autoFocus:m=!1,...s}=e,o=ce("Popover.Button"),[x,C,a,y,g,O,k]=z(o,u.useCallback(r=>[r.popoverState,o.selectors.isPortalled(r),r.button,r.buttonId,r.panel,r.panelId,r.afterButtonSentinel],[])),f=u.useRef(null),b=`headlessui-focus-sentinel-${u.useId()}`,$=Me(),h=$?.closeOthers,i=yt()!==null;u.useEffect(()=>{if(!i)return o.actions.setButtonId(p),()=>o.actions.setButtonId(null)},[i,p,o]);let[B]=u.useState(()=>Symbol()),X=Z(f,n,Ze(),I(r=>{if(!i){if(r)o.state.buttons.current.push(B);else{let c=o.state.buttons.current.indexOf(B);c!==-1&&o.state.buttons.current.splice(c,1)}o.state.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),r&&o.actions.setButton(r)}})),ee=Z(f,n),A=I(r=>{var c,E,T;if(i){if(o.state.popoverState===P.Closed)return;switch(r.key){case q.Space:case q.Enter:r.preventDefault(),(E=(c=r.target).click)==null||E.call(c),o.actions.close(),(T=o.state.button)==null||T.focus();break}}else switch(r.key){case q.Space:case q.Enter:r.preventDefault(),r.stopPropagation(),o.state.popoverState===P.Closed?(h?.(o.state.buttonId),o.actions.open()):o.actions.close();break;case q.Escape:if(o.state.popoverState!==P.Open)return h?.(o.state.buttonId);if(!f.current)return;let R=re(f.current);if(R&&!f.current.contains(R))return;r.preventDefault(),r.stopPropagation(),o.actions.close();break}}),N=I(r=>{i||r.key===q.Space&&r.preventDefault()}),V=I(r=>{var c,E;Ne(r.currentTarget)||v||(i?(o.actions.close(),(c=o.state.button)==null||c.focus()):(r.preventDefault(),r.stopPropagation(),o.state.popoverState===P.Closed?(h?.(o.state.buttonId),o.actions.open()):o.actions.close(),(E=o.state.button)==null||E.focus()))}),te=I(r=>{r.preventDefault(),r.stopPropagation()}),{isFocusVisible:ne,focusProps:H}=Ge({autoFocus:m}),{isHovered:K,hoverProps:l}=qe({isDisabled:v}),{pressed:w,pressProps:F}=Le({disabled:v}),_=x===P.Open,W=se({open:_,active:w||_,disabled:v,hover:K,focus:ne,autofocus:m}),D=Ve(e,a),Y=i?ve({ref:ee,type:D,onKeyDown:A,onClick:V,disabled:v||void 0,autoFocus:m},H,l,F):ve({ref:X,id:y,type:D,"aria-expanded":x===P.Open,"aria-controls":g?O:void 0,disabled:v||void 0,autoFocus:m,onKeyDown:A,onKeyUp:N,onClick:V,onMouseDown:te},H,l,F),le=ke(),de=I(()=>{if(!be(o.state.panel))return;let r=o.state.panel;function c(){Q(le.current,{[M.Forwards]:()=>L(r,j.First),[M.Backwards]:()=>L(r,j.Last)})===$e.Error&&L(ye(Se(o.state.button)).filter(E=>E.dataset.headlessuiFocusGuard!=="true"),Q(le.current,{[M.Forwards]:j.Next,[M.Backwards]:j.Previous}),{relativeTo:o.state.button})}c()}),d=ae();return S.createElement(S.Fragment,null,d({ourProps:Y,theirProps:s,slot:W,defaultTag:Ct,name:"Popover.Button"}),_&&!i&&C&&S.createElement(me,{id:b,ref:k,features:Pe.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:de}))}let Bt="div",wt=ie.RenderStrategy|ie.Static;function je(e,n){let t=u.useId(),{id:p=`headlessui-popover-backdrop-${t}`,transition:v=!1,...m}=e,s=ce("Popover.Backdrop"),o=z(s,u.useCallback($=>$.popoverState,[])),[x,C]=u.useState(null),a=Z(n,C),y=Fe(),[g,O]=Te(v,x,y!==null?(y&U.Open)===U.Open:o===P.Open),k=I($=>{if(Ne($.currentTarget))return $.preventDefault();s.actions.close()}),f=se({open:o===P.Open}),b={ref:a,id:p,"aria-hidden":!0,onClick:k,..._e(O)};return ae()({ourProps:b,theirProps:m,slot:f,defaultTag:Bt,features:wt,visible:g,name:"Popover.Backdrop"})}let Et="div",Ot=ie.RenderStrategy|ie.Static;function kt(e,n){let t=u.useId(),{id:p=`headlessui-popover-panel-${t}`,focus:v=!1,anchor:m,portal:s=!1,modal:o=!1,transition:x=!1,...C}=e,a=ce("Popover.Panel"),y=z(a,a.selectors.isPortalled),[g,O,k,f,b]=z(a,u.useCallback(d=>[d.popoverState,d.button,d.__demoMode,d.beforePanelSentinel,d.afterPanelSentinel],[])),$=`headlessui-focus-sentinel-before-${t}`,h=`headlessui-focus-sentinel-after-${t}`,i=u.useRef(null),B=Ke(m),[X,ee]=We(B),A=Ye();B&&(s=!0);let[N,V]=u.useState(null),te=Z(i,n,B?X:null,a.actions.setPanel,V),ne=we(O),H=we(i.current);Ue(()=>(a.actions.setPanelId(p),()=>a.actions.setPanelId(null)),[p,a]);let K=Fe(),[l,w]=Te(x,N,K!==null?(K&U.Open)===U.Open:g===P.Open);at(l,O,a.actions.close),st(k?!1:o&&l,H);let F=I(d=>{var r;switch(d.key){case q.Escape:if(a.state.popoverState!==P.Open||!i.current)return;let c=re(i.current);if(c&&!i.current.contains(c))return;d.preventDefault(),d.stopPropagation(),a.actions.close(),(r=a.state.button)==null||r.focus();break}});u.useEffect(()=>{var d;e.static||g===P.Closed&&((d=e.unmount)==null||d)&&a.actions.setPanel(null)},[g,e.unmount,e.static,a]),u.useEffect(()=>{if(k||!v||g!==P.Open||!i.current)return;let d=re(i.current);i.current.contains(d)||L(i.current,j.First)},[k,v,i.current,g]);let _=se({open:g===P.Open,close:a.actions.refocusableClose}),W=ve(B?A():{},{ref:te,id:p,onKeyDown:F,onBlur:v&&g===P.Open?d=>{var r,c,E,T,R;let G=d.relatedTarget;G&&i.current&&((r=i.current)!=null&&r.contains(G)||(a.actions.close(),((E=(c=f.current)==null?void 0:c.contains)!=null&&E.call(c,G)||(R=(T=b.current)==null?void 0:T.contains)!=null&&R.call(T,G))&&G.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:{...C.style,...ee,"--button-width":Qe(l,O,!0).width},..._e(w)}),D=ke(),Y=I(()=>{let d=i.current;if(!d)return;function r(){Q(D.current,{[M.Forwards]:()=>{var c;L(d,j.First)===$e.Error&&((c=a.state.afterPanelSentinel.current)==null||c.focus())},[M.Backwards]:()=>{var c;(c=a.state.button)==null||c.focus({preventScroll:!0})}})}r()}),le=I(()=>{let d=i.current;if(!d)return;function r(){Q(D.current,{[M.Forwards]:()=>{var c;if(!a.state.button)return;let E=(c=Se(a.state.button))!=null?c:document.body,T=ye(E),R=T.indexOf(a.state.button),G=T.slice(0,R+1),ue=[...T.slice(R+1),...G];for(let fe of ue.slice())if(fe.dataset.headlessuiFocusGuard==="true"||N!=null&&N.contains(fe)){let xe=ue.indexOf(fe);xe!==-1&&ue.splice(xe,1)}L(ue,j.First,{sorted:!1})},[M.Backwards]:()=>{var c;L(d,j.Previous)===$e.Error&&((c=a.state.button)==null||c.focus())}})}r()}),de=ae();return S.createElement(ft,null,S.createElement(pe.Provider,{value:p},S.createElement(De,{value:a.actions.refocusableClose},S.createElement(lt,{enabled:s?e.static||l:!1,ownerDocument:ne},l&&y&&S.createElement(me,{id:$,ref:f,features:Pe.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:Y}),de({ourProps:W,theirProps:C,slot:_,defaultTag:Et,features:Ot,visible:l,name:"Popover.Panel"}),l&&y&&S.createElement(me,{id:h,ref:b,features:Pe.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:le})))))}let Ft="div";function Tt(e,n){let t=u.useRef(null),p=Z(t,n),[v,m]=u.useState([]),s=I(f=>{m(b=>{let $=b.indexOf(f);if($!==-1){let h=b.slice();return h.splice($,1),h}return b})}),o=I(f=>(m(b=>[...b,f]),()=>s(f))),x=I(()=>{var f;let b=Se(t.current);if(!b)return!1;let $=re(t.current);return(f=t.current)!=null&&f.contains($)?!0:v.some(h=>{var i,B;return((i=b.getElementById(h.buttonId.current))==null?void 0:i.contains($))||((B=b.getElementById(h.panelId.current))==null?void 0:B.contains($))})}),C=I(f=>{for(let b of v)b.buttonId.current!==f&&b.close()}),a=u.useMemo(()=>({registerPopover:o,unregisterPopover:s,isFocusWithinPopoverGroup:x,closeOthers:C}),[o,s,x,C]),y=se({}),g=e,O={ref:p},k=ae();return S.createElement(Oe,null,S.createElement(Ie.Provider,{value:a},k({ourProps:O,theirProps:g,slot:y,defaultTag:Ft,name:"Popover.Group"})))}let _t=J(It),Dt=J(xt),Nt=J(je),Rt=J(je),Mt=J(kt),jt=J(Tt),Ce=Object.assign(_t,{Button:Dt,Backdrop:Rt,Overlay:Nt,Panel:Mt,Group:jt});function At({children:e,className:n}){return oe.jsx("div",{className:he("relative",n),children:oe.jsx(Ce,{children:e})})}function Gt({children:e,className:n,variant:t="outline",size:p,...v}){return oe.jsx(Ce.Button,{as:Ae,variant:t,size:p,className:he(n),...v,children:e})}function qt({children:e,className:n}){return oe.jsx(Ce.Panel,{className:he("absolute z-10 mt-2 w-72 rounded-md bg-background shadow-lg ring-1 ring-border focus:outline-none",n),children:oe.jsx("div",{className:"p-4",children:e})})}Gt.__docgenInfo={description:"",methods:[],displayName:"PopoverButton",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},variant:{defaultValue:{value:"'outline'",computed:!1},required:!1}}};qt.__docgenInfo={description:"",methods:[],displayName:"PopoverPanel",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};At.__docgenInfo={description:"",methods:[],displayName:"Popover",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};export{At as P,Gt as a,qt as b};
