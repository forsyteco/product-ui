import{n as v,a as g}from"./use-sync-refs-BoOcFdrF.js";import{b as w}from"./keyboard-CPYOBzPz.js";import{I as A}from"./portal-1sZo8vyw.js";let d=new Map,o=new Map;function p(e){var n;let t=(n=o.get(e))!=null?n:0;return o.set(e,t+1),t!==0?()=>c(e):(d.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>c(e))}function c(e){var n;let t=(n=o.get(e))!=null?n:1;if(t===1?o.delete(e):o.set(e,t-1),t!==1)return;let r=d.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,d.delete(e))}function x(e,{allowed:n,disallowed:t}={}){let r=A(e,"inert-others");v(()=>{var u,f;if(!r)return;let a=g();for(let i of(u=t?.())!=null?u:[])i&&a.add(p(i));let s=(f=n?.())!=null?f:[];for(let i of s){if(!i)continue;let m=w(i);if(!m)continue;let l=i.parentElement;for(;l&&l!==m.body;){for(let h of l.children)s.some(b=>h.contains(b))||a.add(p(h));l=l.parentElement}}return a.dispose},[r,n,t])}export{x as y};
