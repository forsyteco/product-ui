import{r as f,j as C}from"./iframe-ii299Cu5.js";import{I as q}from"./input-DGuz-K7L.js";const N=2,T=e=>e.replace(/,/g,"");function E(e,n="en-GB",t=N,r=0){return e==null?"":new Intl.NumberFormat(n,{minimumFractionDigits:r,maximumFractionDigits:t}).format(e)}function M(e,n="en-GB",t=N){const r=T(e);if(r==="")return"";const m=r.includes("."),[D,l=""]=r.split("."),g=D.replace(/\D/g,""),a=g?new Intl.NumberFormat(n,{maximumFractionDigits:0}).format(Number(g)):"";if(!m)return a;const y=l.replace(/\D/g,"").slice(0,t);return a===""&&y===""?".":`${a===""?"0":a}.${y}`}function F(e){if(e==null||e==="")return;const n=typeof e=="number"?e:Number(e);return Number.isNaN(n)?void 0:n}function w(e,n){return e.includes(".")?Math.min(e.split(".")[1]?.length??0,n):0}function R(e,n){const t=T(e),r=w(t,n);if(t===""||t===".")return{sanitized:t,parsed:void 0,decimals:0};const m=Number(t);return{sanitized:t,parsed:Number.isNaN(m)?void 0:m,decimals:r}}function V({value:e,onValueChange:n,decimalScale:t=N,locale:r="en-GB",min:m,max:D,currencySymbol:l="£",startElement:g,onBlur:a,...y}){const[d,b]=f.useState(""),[x,I]=f.useState(!1),v=f.useRef(e),o=f.useRef(0);f.useEffect(()=>{if(x)return;v.current!==e&&(o.current=0);const i=o.current>0?Math.min(o.current,t):0,s=E(e,r,t,i);s!==d&&b(s),v.current=e},[t,d,x,r,e]);function h(u){const i=F(m),s=F(D),c=i===void 0?u:Math.max(u,i);return s===void 0?c:Math.min(c,s)}return C.jsx(q,{...y,type:"text",inputMode:"decimal",startElement:g??(l?C.jsx("span",{children:l}):void 0),value:d,onBlur:u=>{I(!1);const{parsed:i,decimals:s}=R(d,t);if(i===void 0){b(""),o.current=0,n?.(void 0),a?.(u);return}const c=h(i),p=s;o.current=p,b(E(c,r,t,p)),n?.(c),a?.(u)},onChange:u=>{I(!0);const i=M(u.target.value,r,t);b(i);const{parsed:s,decimals:c}=R(i,t);if(s===void 0){o.current=0,n?.(void 0);return}const p=h(s);o.current=c,v.current=p,n?.(p)}})}V.__docgenInfo={description:"",methods:[],displayName:"CurrencyInput",props:{value:{required:!1,tsType:{name:"number"},description:""},onValueChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:""},decimalScale:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}},locale:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'en-GB'",computed:!1}},min:{required:!1,tsType:{name:"number"},description:""},max:{required:!1,tsType:{name:"number"},description:""},currencySymbol:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'£'",computed:!1}}}};export{V as C};
