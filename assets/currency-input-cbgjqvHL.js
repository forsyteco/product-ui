import{r as p,j as E}from"./iframe-CeVB8obd.js";import{I as w}from"./input-OJTsGN7_.js";const N=2,q=e=>e.replace(/,/g,"");function T(e,n="en-GB",t=N,r=0){return e==null?"":new Intl.NumberFormat(n,{minimumFractionDigits:r,maximumFractionDigits:t}).format(e)}function M(e,n="en-GB",t=N){const r=q(e);if(r==="")return"";const c=r.includes("."),[D,f=""]=r.split("."),l=D.replace(/\D/g,""),a=l?new Intl.NumberFormat(n,{maximumFractionDigits:0}).format(Number(l)):"";if(!c)return a;const g=f.replace(/\D/g,"").slice(0,t);return a===""&&g===""?".":`${a===""?"0":a}.${g}`}function F(e){if(e==null||e==="")return;const n=typeof e=="number"?e:Number(e);return Number.isNaN(n)?void 0:n}function V(e,n){return e.includes(".")?Math.min(e.split(".")[1]?.length??0,n):0}function R(e,n){const t=q(e),r=V(t,n);if(t===""||t===".")return{sanitized:t,parsed:void 0,decimals:0};const c=Number(t);return{sanitized:t,parsed:Number.isNaN(c)?void 0:c,decimals:r}}function j({value:e,onValueChange:n,decimalScale:t=N,locale:r="en-GB",min:c,max:D,currencySymbol:f="£",startElement:l,onBlur:a,...g}){const[y,b]=p.useState(""),[x,I]=p.useState(!1),v=p.useRef(e),o=p.useRef(0);p.useEffect(()=>{if(x||e==null)return;v.current!==e&&(o.current=0);const u=o.current>0?Math.min(o.current,t):0,i=T(e,r,t,u);i!==y&&b(i),v.current=e},[t,y,x,r,e]);function h(s){const u=F(c),i=F(D),m=u===void 0?s:Math.max(s,u);return i===void 0?m:Math.min(m,i)}return E.jsx(w,{...g,type:"text",inputMode:"decimal",startElement:l??(f?E.jsx("span",{children:f}):void 0),value:y,onBlur:s=>{I(!1);const u=s.currentTarget.value,{parsed:i,decimals:m}=R(u,t);if(i===void 0){b(""),o.current=0,n?.(void 0),a?.(s);return}const d=h(i),C=m;o.current=C,b(T(d,r,t,C)),n?.(d),a?.(s)},onChange:s=>{I(!0);const u=M(s.target.value,r,t);b(u);const{parsed:i,decimals:m}=R(u,t);if(i===void 0){o.current=0,n?.(void 0);return}const d=h(i);o.current=m,v.current=d,n?.(d)}})}j.__docgenInfo={description:"",methods:[],displayName:"CurrencyInput",props:{value:{required:!1,tsType:{name:"number"},description:""},onValueChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:""},decimalScale:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}},locale:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'en-GB'",computed:!1}},min:{required:!1,tsType:{name:"number"},description:""},max:{required:!1,tsType:{name:"number"},description:""},currencySymbol:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'£'",computed:!1}}}};export{j as C};
